name: build unified json file
on:
  release:
    types: [published]
jobs:
  build_file:
    name: build unified json file
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repo
        uses: actions/checkout@v2
      - name: Run script
        uses: actions/setup-node@v2
        with:
          node-version: node-version
          cache: 'npm'
      - run: node script.js
      - name: push file to main
        uses: EndBug/add-and-commit@v9
        with:
          add: 'path_to_file'
          committer_name: Committer Name
          # The email of the custom committer you want to use, if different from the author of the commit.
          # Default: the email of the author (set with either author_email or default_author)
          committer_email: mail@example.com
          # Determines the way the action fills missing author name and email. Three options are available:
          # - github_actor -> UserName <UserName@users.noreply.github.com>
          # - user_info -> Your Display Name <your-actual@email.com>
          # - github_actions -> github-actions <email associated with the github logo>
          # Default: github_actor
          default_author: github_actor
          # The message for the commit.
          # Default: 'Commit from GitHub Actions (name of the workflow)'
          message: 'Your commit message'
          # Whether to push the commit and, if any, its tags to the repo. It can also be used to set the git push arguments (see the paragraph below for more info)
          # Default: true
          push: true
