{
    "commands": [
        {
            "description": "Append helm_sets string with enable metrics Helm set",
            "run": [
                "echo \"Creating enable metrics Helm set...\";",
                "helm_set=\" --set logzio-k8s-telemetry.metrics.enabled=true\";",
                "helm_sets+=\"$helm_set\";"
            ]
        },
        {
            "description": "Append helm_sets string with Logz.io metrics listener Helm set",
            "run": [
                "echo \"Getting Logz.io metrics listener...\";",
                "listener_url=$(echo \"$APP_JSON\" | jq -r \".listenerUrl\");",
                "listener_url=\"https://$listener_url:8053\";",
                "echo \"Creating Logz.io metrics listener Helm set...\";",
                "helm_set=\" --set logzio-k8s-telemetry.secrets.ListenerHost=$listener_url\";",
                "helm_sets+=\"$helm_set\";"
            ]
        },
        {
            "description": "Append helm_sets string with Logz.io metrics token Helm set",
            "run": [
                "echo \"Getting Logz.io metrics token...\";",
                "shipping_token=$(echo \"$APP_JSON\" | jq -r \".shippingTokens.METRICS\");",
                "echo \"Creating Logz.io metrics token Helm set...\";",
                "helm_set=\" --set logzio-k8s-telemetry.secrets.MetricsToken=$shipping_token\";",
                "helm_sets+=\"$helm_set\";"
            ]
        },
        {
            "description": "Append helm_sets string with Windows Node username and password if Kubernetes runs on Windows OS",
            "run": [
                "echo \"Getting is Windows...\";",
                "is_windows_param=$(find_param \"metrics\" \"$metrics_params\" \"isWindows\");",
                "if [ \"$is_windows_param\" = \"\" ]; then",
                    "echo \"Kubernetes does not run on Windows OS\";",
                "else",
                    "echo \"Kubernetes runs on Windows OS\";",
                    "read -p \"Please enter your Windows Node username: \" username </dev/tty;",
                    "read -p \"Please enter your Windows Node password: \" password </dev/tty;",
                    "windows_sets+=\" --set logzio-k8s-telemetry.secrets.windowsNodeUsername=$username\";",
                    "windows_sets+=\" --set logzio-k8s-telemetry.secrets.windowsNodePassword=$password\";",
                    "helm_sets+=\"$windows_sets\";",
                "fi;"
            ]
        }
    ]
}